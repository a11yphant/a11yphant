// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
  output   = "../client"
}

model Challenge {
  @@map(name: "challenges")
  id      String     @id @default(uuid())
  slug    String     @unique
  name    String
  levels  Level[]
}

model Level {
  @@map(name: "levels")
  id            String        @id @default(uuid())
  order         Int           @default(0)
  tldr          String
  instructions  String
  challenge     Challenge     @relation(fields: [challengeId], references: [id])
  challengeId   String
  requirements  Requirement[]
  hints         Hint[]
  resources     Resource[]
  submissions   Submission[]
  html          String?
  css           String?
  js            String?
}

model Requirement {
  @@map(name: "requirements")
  id            String      @id @default(uuid())
  title         String
  level         Level       @relation(fields: [levelId], references: [id])
  levelId       String
}

model Hint {
  @@map(name: "hints")
  id            String      @id @default(uuid())
  content       String
  level         Level       @relation(fields: [levelId], references: [id])
  levelId       String
}

model Resource {
  @@map(name: "resources")
  id            String      @id @default(uuid())
  title         String
  link          String
  level         Level       @relation(fields: [levelId], references: [id])
  levelId       String
}

model Submission {
  @@map(name: "submissions")
  id            String      @id @default(uuid())
  html          String?
  css           String?
  js            String?
  level         Level       @relation(fields: [levelId], references: [id])
  levelId       String
}