stages:
  - prepare
  - analyze

#----------------------------------------------------------------------
#
# Job templates
#
#----------------------------------------------------------------------

.job_template: &npm-dependencies
  tags:
    - docker
  stage: prepare
  image: node:14-alpine
  script: npm install --prefix $PROJECT_PATH
  artifacts:
    paths:
      - $PROJECT_PATH/node_modules

.job_template: &lint
  tags:
    - docker
  stage: analyze
  image: node:14-alpine
  script: npm run lint --prefix $PROJECT_PATH

#----------------------------------------------------------------------
#
# Jobs
#
#----------------------------------------------------------------------

#-----------------------------------
# Submission Checker
#-----------------------------------

install-dependencies:submission-checker:
  variables:
    PROJECT_PATH: services/submission-checker
  <<: *npm-dependencies

lint:submission-checker:
  needs:
    - install-dependencies:submission-checker
  variables:
    PROJECT_PATH: services/submission-checker
  <<: *lint

